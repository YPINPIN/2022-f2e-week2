import{_ as f,m as v,o as n,c as d,a as t,j as u,k as m,d as c,v as p,t as g,p as w,e as U}from"./index.50f16744.js";import{p as _}from"./pdfHelper.661cd53d.js";const k="/2022-f2e-week2/assets/img_photo.1dee9671.svg",b="/2022-f2e-week2/assets/ic_close.9afdff2b.svg",y="/2022-f2e-week2/assets/ic_close_h.9f096349.svg";const C={name:"SignUpload",data(){return{fileName:"",closeHover:!1,lgWidth:240,smWidth:140}},methods:{fileUploadClick(){this.$refs.fileUpload.click()},async onUploadFileChange(s){if(s.target.files[0]===void 0)return;const e=new fabric.Canvas("upload-preview-canvas");e.requestRenderAll();let r=document.documentElement.clientWidth>567?this.lgWidth:this.smWidth;const h=await _.printPDF(s.target.files[0],r),o=await _.pdfToImage(h);e.setWidth(o.width),e.setHeight(o.height),e.setBackgroundImage(o,e.renderAll.bind(e)),this.fileName=s.target.files[0].name,this.$store.commit("setUploadFile",{value:s.target.files[0]}),this.setHasUpload(!0)},setHasUpload(s){s||this.$store.commit("setUploadFile",{value:void 0}),this.$store.commit("setHasUpload",s)}},computed:{...v(["hasUpload"])}},l=s=>(w("data-v-c0a1e6be"),s=s(),U(),s),H={class:"sign-upload"},S={class:"sign-upload-bg"},F={key:0,xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I=l(()=>t("rect",{x:"0",y:"0",rx:"20",ry:"20",width:"100%",height:"100%",fill:"transparent",stroke:"black","stroke-width":"2px","stroke-dasharray":"8"},null,-1)),W=[I],x={key:0,class:"upload-action"},N=l(()=>t("img",{class:"upload-action-icon",src:k,alt:"upload-action-icon"},null,-1)),B=l(()=>t("h5",{class:"upload-action-title"},"\u6216\u8005\u5C07\u6A94\u6848\u62D6\u66F3\u5230\u9019\u88E1",-1)),D=l(()=>t("p",{class:"upload-action-info"}," \u50C5\u652F\u63F4 PDF\u3001JPG\u3001PNG \u6A94\u6848\uFF0C\u4E14\u5BB9\u91CF\u4E0D\u8D85\u904E 20MB\u3002 ",-1)),M={class:"upload-preview"},P={class:"upload-preview-wrapper"},A={src:b,alt:"close"},E={src:y,alt:"close-hover"},G=l(()=>t("canvas",{id:"upload-preview-canvas",class:"upload-preview-canvas",width:"240",style:{bottom:"50px"}},null,-1)),V={class:"upload-preview-name"};function j(s,e,r,h,o,i){return n(),d("section",H,[t("div",S,[t("div",null,[s.hasUpload?u("",!0):(n(),d("svg",F,W))])]),s.hasUpload?u("",!0):(n(),d("div",x,[N,t("input",{ref:"fileUpload",type:"file",accept:"application/pdf",onChange:e[0]||(e[0]=(...a)=>i.onUploadFileChange&&i.onUploadFileChange(...a)),hidden:""},null,544),t("button",{class:"upload-action-btn",onClick:e[1]||(e[1]=m((...a)=>i.fileUploadClick&&i.fileUploadClick(...a),["prevent"]))}," \u9078\u64C7\u6A94\u6848 "),B,D])),c(t("div",M,[t("div",P,[t("button",{class:"upload-preview-close",onMouseenter:e[2]||(e[2]=a=>o.closeHover=!0),onMouseleave:e[3]||(e[3]=a=>o.closeHover=!1),onClick:e[4]||(e[4]=a=>i.setHasUpload(!1))},[c(t("img",A,null,512),[[p,!o.closeHover]]),c(t("img",E,null,512),[[p,o.closeHover]])],32),G]),t("h5",V,g(o.fileName),1)],512),[[p,s.hasUpload]])])}const R=f(C,[["render",j],["__scopeId","data-v-c0a1e6be"]]);export{R as default};
